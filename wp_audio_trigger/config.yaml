name: "WP Audio Trigger"
slug: "wp_audio_trigger"
description: "Event-Recorder: 1/3-Oktav 40â€“315 Hz, Trigger @80/160 Hz (A), FLAC+CSV, MQTT"
version: "0.1.28"
arch: [aarch64, armv7, armhf, amd64]
startup: services
init: false
audio: true
map:
  - media:rw
homeassistant_api: true
hassio_api: true
hassio_role: admin
ingress: true
ingress_port: 8099
panel_icon: mdi:waveform

options:
  mqtt_host: "core-mosquitto"
  mqtt_port: 1883
  mqtt_user: ""
  mqtt_password: ""
  topic_base: "wp_audio"
  thresh_a80: 50.0
  thresh_a160: 50.0
  hold_sec: 2
  pre_trigger: 20
  post_trigger: 30
  samplerate: 48000
  device: ""                        # leer = Standard-Eingang
  event_dir: "/media/wp_audio/events"
  calibration_file: "/data/calibration.json"
  publish_spectrum: true
  spectrum_weighting: "Z"
  spectrum_interval: 0.25
  ui_port: 8099
  pulse_source: "alsa_input.usb-BEHRINGER_UMC202HD_192k-00.HiFi__Mic1__source"
  pulse_volume: 100    # Prozent (100..150 empfohlen max. 150)
  trigger_freq_1: 80
  trigger_amp_1: 50.0
  trigger_freq_2: 160
  trigger_amp_2: 50.0
  trigger_freq_3: 125
  trigger_amp_3: 55.0
  trigger_freq_4: 63
  trigger_amp_4: 52.0
  trigger_freq_5: 250
  trigger_amp_5: 58.0

schema:
  mqtt_host: str
  mqtt_port: int
  mqtt_user: str
  mqtt_password: str
  topic_base: str
  thresh_a80: float
  thresh_a160: float
  hold_sec: int
  pre_trigger: int
  post_trigger: int
  samplerate: int
  device: str
  event_dir: str
  calibration_file: str
  publish_spectrum: bool
  spectrum_weighting: str
  spectrum_interval: float
  ui_port: int
  pulse_source: str
  pulse_volume: int
  trigger_freq_1: int
  trigger_amp_1: float
  trigger_freq_2: int
  trigger_amp_2: float
  trigger_freq_3: int
  trigger_amp_3: float
  trigger_freq_4: int
  trigger_amp_4: float
  trigger_freq_5: int
  trigger_amp_5: float

